---
import SocialList from "@/components/SocialList.astro";
import PageLayout from "@/layouts/Base.astro";
import { Image } from "astro:assets";
import pfp from "@/assets/pfp.jpg";
import { newsFeed } from "@/data/news";
import { processText } from "@/utils/linkify";
---

<PageLayout meta={{ title: "Home" }}>
	<section class="flex flex-col sm:flex-row">
		<div class="flex-1 sm:max-w-lg sm:flex-auto">
			<h1 class="subtitle mb-6">hello! my name is</h1>
			<h2 class="large-title mb-6">aditya</h2>
			<p class="font-mono text-sm font-normal leading-6">
				i am passionate about distributed systems, large-scale performant architectures, and
				designing high-throughput, fault-tolerant systems.
			</p>
			<br />
			<br />
			<SocialList />
		</div>
		<div class="flex-1 sm:max-w-md sm:flex-auto">
			<Image src={pfp} alt="Aditya Balasubramanian" class="h-auto w-72" />
		</div>
	</section>

	<section aria-label="News feed" class="mt-16">
		<h2 class="title mb-4 text-xl">future</h2>
		<ul class="mb-8 space-y-2">
		  {newsFeed.future.map((item) => (
			<li class="flex items-start font-mono text-sm">
			  <span class="mr-2">•</span>
			  <span>
				{processText(item.text, item.links).map((part) => 
				  part.type === 'link' ? (
					<a
					  href={part.href}
					  target="_blank"
					  class="relative text-link after:absolute after:bottom-0 after:left-0 after:h-px after:w-full after:bg-link after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:duration-300 after:ease-in-out"
					>
					  {part.text}
					</a>
				  ) : (
					part.content
				  )
				)}
			  </span>
			</li>
		  ))}
		</ul>
		<h2 class="title mb-4 text-xl">currently</h2>
		<ul class="mb-8 space-y-2">
		  {newsFeed.currently.map((item) => (
			<li class="flex items-start font-mono text-sm">
			  <span class="mr-2">•</span>
			  <span>
				{processText(item.text, item.links).map((part) => 
				  part.type === 'link' ? (
					<a
					  href={part.href}
					  target="_blank"
					  class="relative text-link after:absolute after:bottom-0 after:left-0 after:h-px after:w-full after:bg-link after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:duration-300 after:ease-in-out"
					>
					  {part.text}
					</a>
				  ) : (
					part.content
				  )
				)}
			  </span>
			</li>
		  ))}
		</ul>

		<h2 class="title mb-4 text-xl">previously</h2>
		<ul class="space-y-2">
		  {newsFeed.previously.map((item) => (
			<li class="flex items-start font-mono text-sm">
			  <span class="mr-2">•</span>
			  <span>
				{processText(item.text, item.links).map((part) => 
				  part.type === 'link' ? (
					<a
					  href={part.href}
					  target="_blank"
					  class="relative text-link after:absolute after:bottom-0 after:left-0 after:h-px after:w-full after:bg-link after:origin-bottom-right after:scale-x-0 hover:after:origin-bottom-left hover:after:scale-x-100 after:transition-transform after:duration-300 after:ease-in-out"
					>
					  {part.text}
					</a>
				  ) : (
					part.content
				  )
				)}
			  </span>
			</li>
		  ))}
		</ul>
	  </section>
</PageLayout>
